{"version":3,"sources":["webpack:///webpack/bootstrap cffcdbaa3ac3b7e9bfc2","webpack:///./lib/theremax.js","webpack:///./lib/grid.js","webpack:///./lib/control.js","webpack:///./lib/note.js","webpack:///./lib/ephemeral.js","webpack:///./lib/knob.js"],"names":["Theremax","ctx","el","grid","bindMouseDownHandler","bindMouseUpHandler","bindMouseMoveHandler","bindTouchDownHandler","bindTouchMoveHandler","bindTouchEndHandler","bindMouseHandlers","bindTouchHandlers","bindPauseHandler","window","setInterval","step","draw","addEventListener","e","handleMouseDown","handleMouseUp","handleTouchDown","code","preventDefault","$","toggleClass","power","togglePlay","bind","document","getElementById","handleTouchEnd","handleTouchMove","handleMouseMove","event","canvas","width","innerWidth","height","innerHeight","context","getContext","tm","start","NUM_CONTROLS","DIM_X","DIM_Y","Grid","trayHeight","viewWidth","viewHeight","controls","touches","addControls","scroll","pause","paused","play","forEach","touch","stop","mouseDown","click","control","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","stopPropagation","indexOf","pos","freeNode","objects","allControls","i","length","dragged","isClicked","posArray","j","targetTouches","et","push","getCursorPosition","target","touchMap","opts","selected","getClicked","move","checkBounds","elList","cand","dist","candDist","distanceTo","unmatchedPos","matchedEls","unmatchedEls","filter","u","shift","newTouches","reduce","a","concat","p","norm","active","acc","xMult","Math","PI","pow","yMult","max","sin","lineWidth","lineJoin","beginPath","moveTo","lineTo","globalAlpha","strokeStyle","stroke","group","saveStyle","saveWidth","saveAlpha","clearRect","drawWave","drawGrid","drawGroup","drawPanel","fillStyle","panel","complete","drawImage","fill","ret","min","Control","options","wrap","radius","faceColor","ridgeColor","Boolean","note","arc","beginning","end","numSpokes","fromRadius","toRadius","arcPos","drawSlice","drawSpokes","angle","undefined","cos","dxp","dyp","AudioContext","webkitAudioContext","createOscillator","freq","osc","type","frequency","value","detune","currentTime","createGainNode","gainNode","createGain","gain","connect","destination","Note","pFreq","pAmp","volume","oscillatorNode","pVol","Ephemeral","Knob","img"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cffcdbaa3ac3b7e9bfc2","import Grid from './grid.js';\n\nclass Theremax {\n  constructor(ctx, el) {\n    this.grid = new Grid();\n    this.el = el;\n    this.ctx = ctx;\n  }\n\n  bindMouseHandlers() {\n    this.bindMouseDownHandler();\n    this.bindMouseUpHandler();\n    this.bindMouseMoveHandler();\n  }\n\n  bindTouchHandlers() {\n    this.bindTouchDownHandler();\n    this.bindTouchMoveHandler();\n    this.bindTouchEndHandler();\n  }\n\n  start() {\n    this.bindMouseHandlers();\n    this.bindTouchHandlers();\n    this.bindPauseHandler();\n    window.setInterval(\n      () => {\n        this.grid.step();\n        this.grid.draw(this.ctx);\n      },\n      40\n    );\n  }\n\n  bindMouseDownHandler() {\n    this.el.addEventListener(\"mousedown\",\n      (e) => {\n        this.grid.handleMouseDown(e);\n      }\n    );\n  }\n\n  bindMouseUpHandler() {\n    this.el.addEventListener(\"mouseup\",\n      (e) => {\n        this.grid.handleMouseUp(e);\n      }\n    );\n  }\n\n  bindTouchDownHandler() {\n    this.el.addEventListener(\"touchstart\",\n      (e) => {\n        this.grid.handleTouchDown(e);\n      }\n    );\n  }\n\n  bindPauseHandler() {\n    window.addEventListener(\"keyup\",\n      (e) => {\n        if (e.code !== \"Space\") {\n          return;\n        }\n        e.preventDefault();\n        $(\".menu-overlay\").toggleClass(\"hidden\");\n        $(power).toggleClass(\"on\");\n        this.grid.togglePlay.bind(this.grid)();\n      }\n    );\n\n    let power = document.getElementById(\"power-switch\");\n\n    power.addEventListener(\"mousedown\",\n      (e) => {\n        e.preventDefault();\n        $(\".menu-overlay\").toggleClass(\"hidden\");\n        $(power).toggleClass(\"on\");\n        this.grid.togglePlay.bind(this.grid)();\n      }\n    );\n\n    power.addEventListener(\"touchdown\",\n      (e) => {\n        e.preventDefault();\n        $(\".menu-overlay\").toggleClass(\"hidden\");\n        $(power).toggleClass(\"on\");\n        this.grid.togglePlay.bind(this.grid)();\n      }\n    );\n  }\n\n  bindTouchEndHandler() {\n    this.el.addEventListener(\"touchend\",\n      (e) => {\n        this.grid.handleTouchEnd(e);\n      }\n    );\n    this.el.addEventListener(\"touchcancel\",\n      (e) => {\n        this.grid.handleTouchEnd(e);\n      }\n    );\n  }\n\n  bindTouchMoveHandler() {\n    this.el.addEventListener(\"touchmove\",\n      (e) =>  {\n        this.grid.handleTouchMove(e);\n      }\n    );\n  }\n\n  bindMouseMoveHandler() {\n    this.el.addEventListener(\"mousemove\",\n      (e) => {\n        this.grid.handleMouseMove(e);\n      }\n    );\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\",\n  function(event) {\n    let canvas = document.getElementById(\"game-canvas\");\n    canvas.width = window.innerWidth-4;\n    canvas.height = window.innerHeight-4;\n    let context = canvas.getContext(\"2d\");\n    window.el = canvas;\n    let tm = new Theremax(context, canvas);\n    tm.start();\n  }\n);\n\n\n\n// WEBPACK FOOTER //\n// ./lib/theremax.js","import Knob from './knob.js';\nimport Ephemeral from './ephemeral.js';\nconst NUM_CONTROLS = 3;\n\nvar DIM_X = 800;\nvar DIM_Y = 600;\n\nclass Grid {\n  constructor() {\n    DIM_X = window.innerWidth - 4;\n    DIM_Y = window.innerHeight - 4;\n    this.trayHeight = 150;\n    this.viewWidth = DIM_X;\n    this.viewHeight = DIM_Y-this.trayHeight;\n    this.controls = [];\n    this.touches = [];\n    this.addControls();\n    this.scroll = 0;\n\n    this.pause();\n  }\n\n  togglePlay() {\n    if (this.paused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  pause() {\n    this.touches.forEach(touch=>touch.stop());\n    this.touches = [];\n    this.mouseDown = false;\n    this.click && this.click.stop();\n    this.click = null;\n    this.controls.forEach(control=>control.stop());\n    this.paused = 1;\n  }\n\n  play() {\n    this.controls.forEach(control => control.start());\n    this.paused = 0;\n  }\n\n  getCursorPosition(canvas, event) {\n      var rect = canvas.getBoundingClientRect();\n      var x = event.clientX - rect.left;\n      var y = event.clientY - rect.top;\n      return [x,y];\n  }\n\n  handleMouseUp(e) {\n    if (this.paused) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    this.click && (this.controls.indexOf(this.click) < 0) && this.click.stop();\n    this.click = null;\n    this.mouseDown = false;\n  }\n\n  getClicked(pos, freeNode=true) {\n    let objects = this.allControls();\n    for (var i = 0; i < objects.length; i++) {\n      if ((objects[i].dragged || freeNode) && objects[i].isClicked(pos)) {\n        return objects[i];\n      }\n    }\n    return null;\n  }\n\n  touchMap(e) {\n    let posArray = [];\n    for (var j = 0; j < e.targetTouches.length; j++) {\n      let et = e.targetTouches[j];\n      posArray.push(this.getCursorPosition(e.target, et));\n    }\n    return posArray;\n  }\n\n  checkBounds(pos) {\n    let [x,y] = pos;\n    return x <= this.viewWidth && x >= 0 && y <= this.viewHeight && y >= 0;\n  }\n\n  handleTouchDown(e) {\n    let posArray = this.touchMap(e);\n    if (this.paused) {\n      return;\n    }\n\n    var el, opts, selected;\n    for (var i = 0; i < posArray.length; i++) {\n      if ((el = this.getClicked(posArray[i]))) {\n        selected = true;\n        el.dragged = true;\n        el.move(posArray[i]);\n      } else if (this.checkBounds(posArray[i])) {\n        selected = true;\n        opts = {\n          pos: posArray[i],\n          grid: this,\n          dragged: true\n        };\n        this.touches.push(new Ephemeral(opts));\n      }\n    }\n    if (selected) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n  }\n\n  getClosestElement(elList, pos) {\n    let cand, dist, el, candDist;\n    for (var i = 0; i < elList.length; i++) {\n      cand = elList[i];\n      if (!el || (candDist = el.distanceTo(pos)) < dist) {\n        dist = candDist;\n        el = cand;\n      }\n    }\n    return el;\n  }\n\n  handleTouchMove(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.paused) {\n      return;\n    }\n    let posArray = this.touchMap(e);\n    let unmatchedPos = [];\n    let matchedEls = [];\n    let el;\n    for (var i = 0; i < posArray.length; i++) {\n      if ((el = this.getClicked(posArray[i], false))) {\n        matchedEls.push(el);\n        el.move(posArray[i]);\n      } else {\n        unmatchedPos.push(posArray[i]);\n      }\n    }\n\n    let unmatchedEls = this.allControls().filter((u) => u.dragged && matchedEls.indexOf(u) < 0);\n    while (unmatchedEls.length > unmatchedPos.length) {\n      el = unmatchedEls.shift();\n      el.dragged = false;\n      (this.controls.indexOf(el) < 0) && el.stop();\n\n    }\n    while (unmatchedPos.length > unmatchedEls.length) {\n      this.touches.push(new Ephemeral({dragged: true, grid: this, pos: unmatchedPos.shift()}));\n    }\n    for (i = 0; i < unmatchedEls.length; i++) {\n      unmatchedEls[i].move(unmatchedPos[i]);\n    }\n  }\n\n  handleTouchEnd(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.paused) {\n      return;\n    }\n    let posArray = this.touchMap(e);\n    let newTouches = [];\n    for (var i = 0; i < this.touches.length; i++) {\n      let el = this.touches[i];\n      if (posArray.reduce((a, pos) => a || el.isClicked(pos), 0)) {\n        newTouches.push(el);\n      } else {\n        el.stop();\n      }\n    }\n    for (i = 0; i < this.controls.length; i++) {\n      let el = this.controls[i];\n      if (posArray.reduce((a, pos) => a || el.isClicked(pos), 0)) {\n        // pass\n      } else {\n        el.dragged = false;\n      }\n    }\n    this.touches = newTouches;\n  }\n\n  handleMouseMove(e) {\n    if (this.paused) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    let pos = this.getCursorPosition(e.target, e);\n\n    if (this.click) {\n      this.click.move(pos);\n    }\n  }\n\n  handleMouseDown(e) {\n    if (this.paused) {\n      return;\n    }\n    let pos = this.getCursorPosition(e.target, e);\n    if (this.mouseDown) {\n      return;\n    }\n\n    this.mouseDown = true;\n\n    let objects = this.controls;\n    for (var i = 0; i < objects.length; i++) {\n      if (objects[i].isClicked(pos)) {\n        this.click = objects[i];\n        return;\n      }\n    }\n    if (this.checkBounds(pos)) {\n      this.click = new Ephemeral({pos, grid: this});\n    }\n  }\n\n  allControls() {\n    return this.touches.concat(this.click).concat(this.controls).filter((p=>p));\n  }\n\n  addControls() {\n    for (var i = 1; i < NUM_CONTROLS+1; i++) {\n      let opts = {\n        pos: [i * (1/(NUM_CONTROLS+1)) * (this.viewWidth*(NUM_CONTROLS/(NUM_CONTROLS + 1))) + 15,  this.viewHeight + 75 ],\n        grid: this,\n        control: true\n      };\n      this.controls.push(new Knob(opts));\n    }\n  }\n\n  sin(x) {\n    let norm = 1.25*this.allControls().filter((control) => control.active()).length;\n    return this.allControls().reduce(\n      (acc, el) => {\n        let xMult = 4 * Math.PI * (1 + el.pos[0] * 15) / Math.pow(this.viewWidth, 2);\n        let yMult = Math.max(0, 0.5 * (this.viewHeight - el.pos[1])/norm);\n        return acc + yMult * Math.sin(this.scroll + xMult * x);\n      },\n      this.viewHeight/2\n    );\n  }\n\n  drawWave(ctx) {\n    ctx.lineWidth = 3;\n    ctx.lineJoin = \"round\";\n    ctx.beginPath();\n    ctx.moveTo(0, this.sin(0));\n\n    for (var i = 0; i <= this.viewWidth; i += 5) {\n      ctx.lineTo(i, this.sin(i));\n    }\n\n    ctx.globalAlpha = 0.5;\n    ctx.strokeStyle = \"#11AA11\";\n    ctx.lineWidth = 4;\n    ctx.stroke();\n    ctx.lineWidth = 12;\n    ctx.stroke();\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = \"#CCFFDD\"\n    ctx.globalAlpha = 1;\n    ctx.stroke();\n  }\n\n  drawGroup(ctx, group) {\n    for (var i = 0; i < group.length; i++) {\n      group[i].draw(ctx);\n    }\n  }\n\n  draw(ctx) {\n    let saveStyle = ctx.strokeStyle;\n    let saveWidth = ctx.lineWidth;\n    let saveAlpha = ctx.globalAlpha;\n    ctx.clearRect(0, 0, this.viewWidth, DIM_Y);\n    this.drawWave(ctx);\n\n    ctx.globalAlpha = saveAlpha;\n    ctx.strokeStyle = saveStyle;\n    ctx.lineWidth = saveWidth;\n    this.drawGrid(ctx);\n    this.drawGroup(ctx, this.touches);\n    this.click && this.click.draw(ctx);\n    this.drawPanel(ctx);\n    this.drawGroup(ctx, this.controls);\n\n  }\n\n  drawPanel(ctx) {\n    let { fillStyle, globalAlpha } = ctx;\n    let panel = document.getElementById(\"wood-panel\");\n    if (panel.complete) {\n      ctx.drawImage(panel ,0,0,this.viewWidth,150,0,this.viewHeight, this.viewWidth, 150);\n\n    } else {\n      ctx.fillStyle = \"#986445\";\n      ctx.beginPath();\n      ctx.rect(0, this.viewHeight, this.viewWidth, this.trayHeight);\n      ctx.fill();\n    }\n    ctx.beginPath();\n    ctx.fillStyle = \"#420\";\n    ctx.globalAlpha = 0.4;\n    ctx.rect(0, this.viewHeight, this.viewWidth, 5);\n    ctx.fill();\n    ctx.fillStyle = fillStyle;\n    ctx.globalAlpha = globalAlpha;\n  }\n\n  drawGrid(ctx) {\n    let saveStyle = ctx.strokeStyle;\n    ctx.strokeStyle = \"#AAAAAA\";\n    for (var i = 0; i <= DIM_X; i += 80) {\n      ctx.beginPath();\n      ctx.moveTo(i, 0);\n      ctx.lineTo(i, this.viewHeight);\n      ctx.stroke();\n    }\n    let saveWidth = ctx.lineWidth;\n    ctx.lineWidth = 5;\n    for (i = 0; i <= this.viewHeight/2; i += 80) {\n      ctx.beginPath();\n      ctx.moveTo(0,this.viewHeight/2-i);\n      ctx.lineTo(this.viewWidth, this.viewHeight/2-i);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(0,this.viewHeight/2+i);\n      ctx.lineTo(this.viewWidth, this.viewHeight/2+i);\n      ctx.stroke();\n      ctx.lineWidth = saveWidth;\n    }\n  }\n\n  step() {\n    if (!(this.paused)) {\n      this.scroll = (this.scroll + 2/(Math.PI));\n    }\n  }\n\n  wrap(pos) {\n    let ret = [ Math.max(0, Math.min(this.viewWidth, pos[0])),\n    Math.max(0, Math.min(DIM_Y, pos[1])) ];\n    return ret;\n  }\n}\n\nexport default Grid;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/grid.js","import Note from './note';\n\nclass Control {\n  constructor(options) {\n    this.pos = options.grid.wrap(options.pos) || [0,0];\n    this.radius = options.radius || 40;\n    this.faceColor = options.control && \"#cdae64\";\n    this.ridgeColor = options.control && \"#543210\"; // \"#895537\";\n    this.grid = options.grid;\n    this.dragged = Boolean(options.dragged);\n    this.note = new Note(\n      this.pos[0]/this.grid.viewWidth,\n      Math.max(0,1-this.pos[1]/this.grid.viewHeight)\n    );\n  }\n\n  active() {\n    return this.note.active();\n  }\n\n  stop() {\n    this.note.stop();\n  }\n\n  start() {\n    this.note.start();\n  }\n\n  distanceTo(pos) {\n    return Math.pow(Math.pow(this.pos[0]-pos[0]) + Math.pow(this.pos[1]-pos[1]), .5);\n  }\n\n  drawSlice(ctx, opts) {\n    let { strokeStyle, fillStyle, lineWidth, globalAlpha } = ctx;\n    ctx.fillStyle = opts.fillStyle || \"#FFFFFF\";\n    ctx.globalAlpha = opts.globalAlpha || 1.0;\n    ctx.beginPath();\n    ctx.moveTo(...this.pos);\n    ctx.arc(...this.pos, opts.radius || this.radius, opts.beginning, opts.end);\n    ctx.fill();\n    ctx.globalAlpha = globalAlpha;\n    ctx.fillStyle = fillStyle;\n  }\n\n  drawSpokes(ctx, numSpokes=18, fromRadius=0, toRadius=1) {\n    let { globalAlpha, strokeStyle, lineWidth } = ctx;\n    ctx.strokeStyle = \"#000\";\n    ctx.globalAlpha = 0.55;\n    ctx.lineWidth = 2;\n    for (var i = 0; i < 36; i++) {\n      ctx.beginPath();\n      ctx.moveTo(...this.arcPos(Math.PI / numSpokes * i, this.radius * fromRadius));\n      ctx.lineTo(...this.arcPos(Math.PI / numSpokes * i), this.radius * toRadius);\n      ctx.stroke();\n    }\n    ctx.strokeStyle = strokeStyle;\n    ctx.lineWidth = lineWidth;\n    ctx.globalAlpha = globalAlpha;\n  }\n\n  draw(ctx) {\n    let { strokeStyle, fillStyle, lineWidth, globalAlpha } = ctx;\n    this.drawSlice(ctx, {\n      fillStyle: this.ridgeColor,\n      globalAlpha: 1.0,\n      beginning: 0,\n      end: 2 * Math.PI\n    });\n\n    this.drawSlice(ctx, {\n      fillStyle: \"#000\",\n      globalAlpha: 0.25,\n      beginning: 0,\n      end: 2 * Math.PI,\n      radius: this.radius * 0.9\n    });\n    this.drawSpokes(ctx);\n\n    this.drawSlice(ctx, {\n      fillStyle: this.faceColor,\n      globalAlpha: 1.0,\n      beginning: 0,\n      end: 2 * Math.PI,\n      radius: this.radius * 0.9 - 2\n    });\n\n    ctx.lineWidth = lineWidth;\n    ctx.globalAlpha = globalAlpha;\n    ctx.fillStyle = fillStyle;\n    ctx.strokeStyle = strokeStyle;\n  }\n\n  arcPos(angle, radius) {\n    if (radius === undefined) {\n      radius = this.radius;\n    } else {\n      radius = this.radius * radius;\n    }\n    return [ this.pos[0] + Math.cos(angle) * radius,\n             this.pos[1] + Math.sin(angle) * radius ];\n  }\n\n  move(pos) {\n    this.pos = this.grid.wrap(pos);\n    this.note.shift(\n      this.pos[0]/this.grid.viewWidth,\n      Math.max(1-this.pos[1]/this.grid.viewHeight, 0)\n    );\n    return this.pos;\n  }\n\n  isClicked(pos) {\n    let dxp = this.pos[0] - pos[0];\n    let dyp = this.pos[1] - pos[1];\n    return dxp*dxp + dyp*dyp <= this.radius * this.radius;\n  }\n}\n\nexport default Control;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/control.js","const ctx = new (window.AudioContext || window.webkitAudioContext)();\n\nconst createOscillator = (freq) => {\n  const osc = ctx.createOscillator();\n  osc.type = \"sine\";\n  osc.frequency.value = freq;\n  osc.detune.value = 0;\n  osc.start(ctx.currentTime);\n  return osc;\n};\n\nconst createGainNode = () => {\n  const gainNode = ctx.createGain();\n  gainNode.gain.value = 0;\n  gainNode.connect(ctx.destination);\n  return gainNode;\n};\n\nclass Note {\n  constructor(pFreq, pAmp) {\n    let freq = 100*Math.pow(16, pFreq);\n    this.volume = pAmp * .2;\n    this.oscillatorNode = createOscillator(freq);\n    this.gainNode = createGainNode();\n    this.oscillatorNode.connect(this.gainNode);\n\n    this.start();\n  }\n\n  active() {\n    return this.volume > 0;\n  }\n\n  shift(pFreq, pVol) {\n    this.volume = pVol * .2;\n    this.oscillatorNode.frequency.value = 100*Math.pow(16, pFreq);\n    this.start();\n  }\n\n  start() {\n    this.gainNode.gain.value = this.volume;\n  }\n\n  stop() {\n    this.gainNode.gain.value = 0;\n  }\n}\n\nexport default Note;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/note.js","import Control from './control.js';\n\nclass Ephemeral extends Control {\n  constructor(options) {\n    super(options);\n  }\n\n  draw(ctx) {\n    let { strokeStyle, lineWidth, globalAlpha } = ctx;\n    for (var i = 0; i < 5; i++) {\n      let radius = 0.5 * this.radius * (((this.grid.scroll / 6)+i) % 5);\n      ctx.beginPath();\n      ctx.strokeStyle = \"#34FF56\";\n      ctx.lineWidth = 7;\n      // debugger;\n      ctx.globalAlpha = 5/radius;\n      ctx.arc(...this.pos, radius, 0, 2*Math.PI);\n      ctx.stroke();\n\n    }\n\n    ctx.lineWidth = lineWidth;\n    ctx.globalAlpha = globalAlpha;\n    ctx.strokeStyle = strokeStyle;\n  }\n}\n\nexport default Ephemeral;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ephemeral.js","import Control from './control';\n\nclass Knob extends Control {\n  constructor(options) {\n    super(options);\n    this.img = document.getElementById(\"control-knob\");\n  }\n\n  draw(ctx) {\n    if (this.img.complete) {\n      ctx.drawImage(this.img, this.pos[0]-40, this.pos[1]-40);\n    } else {\n      super.draw(ctx);\n    }\n  }\n}\n\nexport default Knob;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/knob.js"],"sourceRoot":""}